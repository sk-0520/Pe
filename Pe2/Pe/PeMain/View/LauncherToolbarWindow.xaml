<W:ViewModelCommonDataWindow
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:VM="clr-namespace:ContentTypeTextNet.Pe.PeMain.ViewModel"
	xmlns:UI="clr-namespace:ContentTypeTextNet.Pe.PeMain.View.Parts"
	xmlns:W="clr-namespace:ContentTypeTextNet.Pe.PeMain.View.Parts.Window"
	xmlns:Control="clr-namespace:ContentTypeTextNet.Library.SharedLibrary.View.Control;assembly=SharedLibrary"
	x:Class="ContentTypeTextNet.Pe.PeMain.View.LauncherToolbarWindow"
	x:TypeArguments="VM:LauncherToolbarViewModel"
	UI:XamlTag.LanguageKey="window/toolbar"
	Title="ToolbarWindow" 
	Height="{Binding FloatHeight, Mode=TwoWay}" 
	Width="{Binding FloatWidth, Mode=TwoWay}"
	Left="{Binding FloatLeft, Mode=TwoWay}" 
	Top="{Binding FloatTop, Mode=TwoWay}"
	WindowStyle="None"
	ShowInTaskbar="False" 
	ResizeMode="NoResize"
	ScrollViewer.VerticalScrollBarVisibility="Disabled"
	WindowStartupLocation="Manual"
	Visibility="{Binding Visibility}" 
	Topmost="{Binding TopMost}"
	xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
	xmlns:PD="clr-namespace:ContentTypeTextNet.Pe.Library.PeData.Define;assembly=PeData"
	xmlns:SD="clr-namespace:ContentTypeTextNet.Library.SharedLibrary.Define;assembly=SharedLibrary"
	
>
	<W:CommonDataWindow.Resources>
		<Style x:Key="Image" TargetType="{x:Type Image}">
			<Setter Property="Source" Value="{Binding ToolbarImage, Mode=OneWay}" />
		</Style>
		<Style x:Key="Text" TargetType="{x:Type TextBlock}">
			<Setter Property="Text" Value="{Binding ToolbarText, Mode=OneWay}" />
		</Style>

		<!--  Cannot find source for binding with reference 'RelativeSource FindAncestor, AncestorType='System.Windows.Controls.ItemsControl', AncestorLevel='1''. BindingExpression:Path=HorizontalContentAlignment; DataItem=null; target element is 'MenuItem' (Name=''); -->
		<Style x:Key="_b" TargetType="MenuItem">
			<Setter Property="HorizontalContentAlignment" Value="Stretch"/>
			<Setter Property="VerticalContentAlignment" Value="Stretch"/>
		</Style>

	</W:CommonDataWindow.Resources>

	<ToolBarTray Orientation="{Binding Orientation, Mode=OneWay}" ClipToBounds="True">

		<Control:TemplateBindingToolBar>
			<Control:TemplateBindingToolBar.Resources>
				<CollectionViewSource Source="{Binding LauncherItems, Mode=OneWay}" x:Key="LauncherItems"/>
			</Control:TemplateBindingToolBar.Resources>

			<Control:TemplateBindingToolBar.ItemsSource>
				<CompositeCollection>
					<xctk:DropDownButton>
						<xctk:DropDownButton.Resources>
							<CollectionViewSource Source="{Binding GroupItems}" x:Key="GroupItems"/>
						</xctk:DropDownButton.Resources>

						<xctk:DropDownButton.Content>
							<StackPanel Orientation="Horizontal">
								<Image Style="{StaticResource Image}"/>
								<TextBlock Style="{StaticResource Text}" />
							</StackPanel>
						</xctk:DropDownButton.Content>
						<xctk:DropDownButton.DropDownContent>
							<StackPanel>
								<Label Content="toolbar pos:" />
								<Grid>
									<Grid.ColumnDefinitions>
										<ColumnDefinition />
										<ColumnDefinition />
										<ColumnDefinition />
									</Grid.ColumnDefinitions>
									<Grid.RowDefinitions>
										<RowDefinition />
										<RowDefinition />
										<RowDefinition />
									</Grid.RowDefinitions>
									<Button Grid.Row="0" Grid.Column="1" Command="{Binding PositionChangeCommand}" CommandParameter="{x:Static SD:DockType.Top}">↑</Button>
									<Button Grid.Row="1" Grid.Column="0" Command="{Binding PositionChangeCommand}" CommandParameter="{x:Static SD:DockType.Left}">←</Button>
									<Button Grid.Row="1" Grid.Column="1" Command="{Binding PositionChangeCommand}" CommandParameter="{x:Static SD:DockType.None}">□</Button>
									<Button Grid.Row="1" Grid.Column="2" Command="{Binding PositionChangeCommand}" CommandParameter="{x:Static SD:DockType.Right}">→</Button>
									<Button Grid.Row="2" Grid.Column="1" Command="{Binding PositionChangeCommand}" CommandParameter="{x:Static SD:DockType.Bottom}">↓</Button>
								</Grid>
								<Separator />
								<MenuItem Header="topmost" UI:XamlTag.LanguageKey="topmost" Style="{StaticResource _b}" />
								<MenuItem Header="auto hide" UI:XamlTag.LanguageKey="autohide" Style="{StaticResource _b}" />
								<Separator />
							</StackPanel>
						</xctk:DropDownButton.DropDownContent>
					</xctk:DropDownButton>
					<CollectionContainer Collection="{Binding Source={StaticResource LauncherItems}}" />
				</CompositeCollection>
			</Control:TemplateBindingToolBar.ItemsSource>
			<Control:TemplateBindingToolBar.ItemTemplate>
				<DataTemplate DataType="{x:Type PD:LauncherKind}">
					<StackPanel Orientation="Vertical">

						<!-- ファイル -->
						<xctk:SplitButton Visibility="{Binding VisibilityFile, Mode=OneWay}">
							<xctk:SplitButton.Content>
								<StackPanel Orientation="Horizontal">
									<Image Style="{StaticResource Image}"/>
									<TextBlock Style="{StaticResource Text}" />
								</StackPanel>
							</xctk:SplitButton.Content>
							<xctk:SplitButton.DropDownContent>
								<StackPanel>
									<MenuItem Header="execute"  Style="{StaticResource _b}" />
									<MenuItem Header="execute-ex"  Style="{StaticResource _b}" />
									<Separator/>
									<MenuItem Header="file"  Style="{StaticResource _b}" />
									<MenuItem Header="path"  Style="{StaticResource _b}" />
								</StackPanel>
							</xctk:SplitButton.DropDownContent>
						</xctk:SplitButton>

						<!-- ディレクトリ -->
						<xctk:DropDownButton Visibility="{Binding VisibilityDirectory, Mode=OneWay}">
							<StackPanel Orientation="Horizontal">
								<Image Style="{StaticResource Image}"/>
								<TextBlock Style="{StaticResource Text}" />
							</StackPanel>
						</xctk:DropDownButton>

						<!-- コマンド -->
						<xctk:SplitButton Visibility="{Binding VisibilityCommand, Mode=OneWay}">
							<StackPanel Orientation="Horizontal">
								<Image Style="{StaticResource Image}"/>
								<TextBlock Style="{StaticResource Text}" />
							</StackPanel>
						</xctk:SplitButton>
					</StackPanel>
				</DataTemplate>
			</Control:TemplateBindingToolBar.ItemTemplate>
		</Control:TemplateBindingToolBar>

	</ToolBarTray>
</W:ViewModelCommonDataWindow>
