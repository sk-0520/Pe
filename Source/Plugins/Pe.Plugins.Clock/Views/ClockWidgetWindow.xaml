<Window
  x:Class="ContentTypeTextNet.Pe.Plugins.Clock.Views.ClockWidgetWindow"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

  xmlns:plugins_clock_viewmodels="clr-namespace:ContentTypeTextNet.Pe.Plugins.Clock.ViewModels"

  Title="ClockWindow"
  Width="200"
  Height="200"
  WindowStyle="None"
  AllowsTransparency="True"
  Background="Transparent"
  MouseEnter="Window_MouseEnter"
  MouseLeave="Window_MouseLeave"

  xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  mc:Ignorable="d"
>
  <Window.Resources>
    <Storyboard x:Key="fadein">
      <DoubleAnimation Storyboard.TargetProperty="Opacity" Duration="0.00:00:00.5" To="1" FillBehavior="HoldEnd" AutoReverse="False" />
    </Storyboard>
    <Storyboard x:Key="fadeout">
      <DoubleAnimation Storyboard.TargetProperty="Opacity" Duration="0.00:00:05.0" To="0" FillBehavior="HoldEnd" AutoReverse="False" />
    </Storyboard>
  </Window.Resources>
  <WindowChrome.WindowChrome>
    <WindowChrome ResizeBorderThickness="0" CaptionHeight="0" CornerRadius="10" GlassFrameThickness="10"/>
  </WindowChrome.WindowChrome>

  <Grid>
    <Viewbox Stretch="Uniform">
      <ContentControl Content="{Binding Content}">
        <ContentControl.Resources>

          <DataTemplate DataType="{x:Type plugins_clock_viewmodels:ClockWidgetSimpleAnalogClockContentViewModel}">
            <Grid Width="100" Height="100">
              <Rectangle Margin="0,-30,0,0" Width="5" Height="30" Fill="Red">
                <Rectangle.RenderTransform>
                  <RotateTransform Angle="{Binding HourAngle}" CenterX="2.5" CenterY="30" />
                </Rectangle.RenderTransform>
              </Rectangle>
              <Rectangle Margin="0,-40,0,0" Width="3" Height="40" Fill="Lime">
                <Rectangle.RenderTransform>
                  <RotateTransform Angle="{Binding MinutesAngle}" CenterX="1.5" CenterY="40" />
                </Rectangle.RenderTransform>
              </Rectangle>
              <Rectangle Margin="0,-50,0,0" Width="2" Height="50" Fill="Orange">
                <Rectangle.RenderTransform>
                  <RotateTransform Angle="{Binding SecondsAngle}" CenterX="1" CenterY="50" />
                </Rectangle.RenderTransform>
              </Rectangle>
            </Grid>
          </DataTemplate>

          <DataTemplate DataType="{x:Type plugins_clock_viewmodels:ClockWidgetJaggyAnalogClockContentViewModel}">
            <Grid Width="100" Height="100">
              <Rectangle RenderOptions.EdgeMode="Aliased" Margin="0,-30,0,0" Width="5" Height="30" Fill="Black" Stroke="White" StrokeThickness="0.5">
                <Rectangle.RenderTransform>
                  <RotateTransform Angle="{Binding HourAngle}" CenterX="2.5" CenterY="30" />
                </Rectangle.RenderTransform>
              </Rectangle>
              <Rectangle RenderOptions.EdgeMode="Aliased" Margin="0,-40,0,0" Width="3" Height="40" Fill="Black" Stroke="White" StrokeThickness="0.5">
                <Rectangle.RenderTransform>
                  <RotateTransform Angle="{Binding MinutesAngle}" CenterX="1.5" CenterY="40" />
                </Rectangle.RenderTransform>
              </Rectangle>
              <Rectangle RenderOptions.EdgeMode="Aliased" Margin="0,-50,0,0" Width="2" Height="50" Fill="Black" Stroke="White" StrokeThickness="0.5">
                <Rectangle.RenderTransform>
                  <RotateTransform Angle="{Binding SecondsAngle}" CenterX="1" CenterY="50" />
                </Rectangle.RenderTransform>
              </Rectangle>
            </Grid>
          </DataTemplate>
        </ContentControl.Resources>
      </ContentControl>
    </Viewbox>

    <ResizeGrip
      x:Name="resize"
      WindowChrome.ResizeGripDirection="BottomRight"
      Opacity="0"
      VerticalAlignment="Bottom"
      HorizontalAlignment="Right"
      Width="10"
      Height="10"
    />
  </Grid>
</Window>
