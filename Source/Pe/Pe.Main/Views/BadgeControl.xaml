<UserControl
  x:Class="ContentTypeTextNet.Pe.Main.Views.BadgeControl"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

  xmlns:app_views_converter="clr-namespace:ContentTypeTextNet.Pe.Core.Views.Converter;assembly=Pe.Core"
  xmlns:app_main_viewmodels_iconviewer="clr-namespace:ContentTypeTextNet.Pe.Main.ViewModels.IconViewer"
  xmlns:app_main_views_converter="clr-namespace:ContentTypeTextNet.Pe.Main.Views.Converter"

  IsTabStop="False"
  Focusable="False"

  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
  mc:Ignorable="d" 
  d:DesignHeight="32"
  d:DesignWidth="32"
>
  <UserControl.Resources>
    <app_views_converter:AutoColorConverter x:Key="AutoColorConverter" />
    <app_views_converter:IconBoxToWidthConverter x:Key="IconBoxToWidthConverter" />
    <app_main_views_converter:BadgeSizeConverter x:Key="CornerRadiusBadgeSizeConverter" Scale="0.3" />

    <SolidColorBrush Color="{Binding Badge.Background, RelativeSource={RelativeSource AncestorType=UserControl}}" x:Key="BackgroundBrush" />
    <SolidColorBrush Color="{Binding Badge.Background, Converter={StaticResource AutoColorConverter}, RelativeSource={RelativeSource AncestorType=UserControl}}" x:Key="ForegroundBrush" />
  </UserControl.Resources>
  
  <ContentControl IsTabStop="False" Focusable="False" Content="{Binding Badge, RelativeSource={RelativeSource AncestorType=UserControl}}">
    <ContentControl.Resources>
      <DataTemplate DataType="{x:Type app_main_viewmodels_iconviewer:BadgeRoundedSquareViewModel}">
        <Border Background="{StaticResource BackgroundBrush}" CornerRadius="{Binding IconBox, Converter={StaticResource CornerRadiusBadgeSizeConverter}, RelativeSource={RelativeSource AncestorType=UserControl}}">
          <TextBlock Padding="2" Text="{Binding Display, Mode=OneTime}" Foreground="{StaticResource ForegroundBrush}" />
        </Border>
      </DataTemplate>
      <DataTemplate DataType="{x:Type app_main_viewmodels_iconviewer:BadgeSolidSquareViewModel}">
        <Border Background="{StaticResource BackgroundBrush}">
          <TextBlock Padding="2" Text="{Binding Display, Mode=OneTime}" Foreground="{StaticResource ForegroundBrush}" />
        </Border>
      </DataTemplate>
      <DataTemplate DataType="{x:Type app_main_viewmodels_iconviewer:BadgeCircleViewModel}">
        <Border Background="{StaticResource BackgroundBrush}" CornerRadius="{Binding IconBox, Converter={StaticResource IconBoxToWidthConverter}, RelativeSource={RelativeSource AncestorType=UserControl}}">
          <TextBlock Padding="2" Text="{Binding Display, Mode=OneTime}" Foreground="{StaticResource ForegroundBrush}" />
        </Border>
      </DataTemplate>
    </ContentControl.Resources>
  </ContentControl>

  <!--<TextBlock Text="{Binding Badge.Display, RelativeSource={RelativeSource AncestorType=UserControl}}"></TextBlock>-->

</UserControl>
