<Window
  x:Name="root"
  x:Class="ContentTypeTextNet.Pe.Main.View.LauncherToolbar.LauncherToolbarWindow"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

  xmlns:app_main_view="clr-namespace:ContentTypeTextNet.Pe.Main.View"
  xmlns:app_main_viewmode_launcheritem="clr-namespace:ContentTypeTextNet.Pe.Main.ViewModel.LauncherItem"

  Title="LauncherToolbarWindow"
  Height="450"
  Width="800"

  WindowStyle="None"
  WindowStartupLocation="Manual"
  BorderThickness="0"
  ResizeMode="NoResize"
  ShowInTaskbar="False"

  Topmost="{Binding IsTopmodst}"

  xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  mc:Ignorable="d"
>
  <Window.Resources>
    <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />

    <Style TargetType="app_main_view:ImageViewerControl">
      <Style.Triggers>
        <DataTrigger Binding="{Binding DataContext.IconScale, ElementName=root}" Value="Small">
          <Setter Property="IconViewer" Value="{Binding Icon.Small}" />
        </DataTrigger>
        <DataTrigger Binding="{Binding DataContext.IconScale, ElementName=root}" Value="Normal">
          <Setter Property="IconViewer" Value="{Binding Icon.Normal}" />
        </DataTrigger>
        <DataTrigger Binding="{Binding DataContext.IconScale, ElementName=root}" Value="Big">
          <Setter Property="IconViewer" Value="{Binding Icon.Big}" />
        </DataTrigger>
        <DataTrigger Binding="{Binding DataContext.IconScale, ElementName=root}" Value="Large">
          <Setter Property="IconViewer" Value="{Binding Icon.Large}" />
        </DataTrigger>
      </Style.Triggers>
    </Style>

    <Grid x:Key="Content" x:Shared="false">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="Auto" />
      </Grid.ColumnDefinitions>

      <app_main_view:ImageViewerControl Grid.Column="0" Margin="{Binding DataContext.IconMargin, ElementName=root, Mode=OneTime}" />
      <TextBlock Grid.Column="1">
        <TextBlock.Style>
          <Style TargetType="TextBlock">
            <Style.Triggers>
              <DataTrigger Binding="{Binding DataContext.IsIconOnly, ElementName=root}" Value="False">
                <Setter Property="Visibility" Value="Visible" />
                <Setter Property="Width" Value="{Binding DataContext.TextWidth, ElementName=root, Mode=OneTime}" />
                <Setter Property="Text" Value="{Binding Name, Mode=OneTime}" />
              </DataTrigger>
            </Style.Triggers>
            <Setter Property="Visibility" Value="Collapsed" />
          </Style>
        </TextBlock.Style>
      </TextBlock>
    </Grid>
  </Window.Resources>
  <Window.Visibility>
    <Binding Path="IsVisible" Converter="{StaticResource BooleanToVisibilityConverter}"/>
  </Window.Visibility>
  <Window.ContextMenu>
    <ContextMenu ItemsSource="{Binding LauncherGroupItems}" />
  </Window.ContextMenu>
  <Grid>
    <ItemsControl ItemsSource="{Binding LauncherItems}">
      <ItemsControl.Resources>

      </ItemsControl.Resources>
      <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
          <StackPanel />
        </ItemsPanelTemplate>
      </ItemsControl.ItemsPanel>
      <ItemsControl.ItemTemplate>
        <!-- ファイル -->
        <DataTemplate DataType="{x:Type app_main_viewmode_launcheritem:LauncherFileItemViewModel}">
          <Button Margin="0" Padding="{Binding DataContext.ButtonPadding, ElementName=root, Mode=OneTime}">
            <ContentControl Content="{StaticResource Content}" />
          </Button>
        </DataTemplate>
      </ItemsControl.ItemTemplate>
    </ItemsControl>
  </Grid>
</Window>
