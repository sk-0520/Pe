> [!CAUTION]
> プラグイン仕様は固まっていないので作成しても Pe バージョンアップによる仕様追従は厳しい。

Pe ではプラグインによる機能拡張に対応しており、Pe の有り余る自己完結型 .NET CLR を使用して実行される。

プラグイン自体は Pe のプロセス内で実行されるため基本的に何でもできるので Pe の動作を不安定にすることも落とすこともできるので作成の際は注意が必要。

さらに Pe 自身のアップデート、ランタイム、依存ライブラリの更新にも追従する必要がある。

> [!NOTE]
> .NET で自己完結型作るとなんかもうファイル数・サイズが大変なことになるのでその再利用が主な実装理由。

# 必要ライブラリ

プラグインを作成するには `Pe.Bridge` プロジェクトが必要になる。

`Pe.Bridge` さえあれば作成そのものに問題はないが、 `Pe.Embedded` のソースを流用するとある程度は楽に実装できる。

> [!TIP]
> Pe 自体を参照しても問題はないが `Pe.Bridge` < `Pe.Library.*` < `Pe.Core` < `Pe.Main` でバージョン追従が難しくなる。

# プラグイン機能

プラグインはテーマ機能とアドオン機能に分かれる。

## テーマ機能

見た目をさわれるんだけど、正直もう少しなんか考えた方がいい。

## アドオン機能

| 機能 | 説明 |
|---|---|
| ランチャーボタン | ボタン型ランチャーの拡張 |
| コマンド入力 | コマンド型ランチャーの列挙アイテムの拡張 |
| ウィジェット | デスクトップに常時表示するウィジェット機能 |
| バックグランド | 後ろで何かする処理 |

# デバッグ用専用処理

以下環境変数を用いることでランチャーアイテムを起動完了時に自動で実行する。  
※プラグイン専用処理ではない

| 名前 | 値 |
|---|---|
| `DEBUG_BOOT_MODE` | <ul><li>launcher</li></ul> |
| `DEBUG_BOOT_ITEM` | ランチャーアイテムID |
